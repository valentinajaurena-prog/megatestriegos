<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mega Test de Riesgos Laborales en el Almacén</title>
  <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@400;700;900&family=Barlow:wght@400;500;600&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    body { margin: 0; padding: 0; background: #07070d; color: #fff; font-family: 'Barlow', sans-serif; }
    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-track { background: #07070d; }
    ::-webkit-scrollbar-thumb { background: #2a2a3a; border-radius: 2px; }
    .quiz-btn { transition: all 0.15s; }
    .quiz-btn:active { transform: scale(0.97); }
    @keyframes toastIn { from { transform: translateY(-50px); opacity:0; } to { transform: translateY(0); opacity:1; } }
    @keyframes pulseBtn { 0%,100%{box-shadow:0 0 0 0 rgba(232,93,4,0.4)} 50%{box-shadow:0 0 0 8px rgba(232,93,4,0)} }
    #root { min-height: 100vh; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
const { useState, useEffect, useRef, useCallback } = React;

const ALL_QUESTIONS = [
  { id:1, block:"Conceptos Generales", difficulty:"fácil", q:"¿Qué define la seguridad laboral en el almacén?", opts:["Solo el uso obligatorio de EPIs","El conjunto de técnicas para eliminar o minimizar riesgos que puedan provocar accidentes","La normativa de horarios de trabajo","El control de inventario"], a:1, exp:"La seguridad laboral engloba todas las técnicas, procedimientos y medidas destinados a prevenir accidentes y enfermedades profesionales, no solo el uso de EPIs." },
  { id:2, block:"Conceptos Generales", difficulty:"fácil", q:"¿Qué diferencia hay entre accidente de trabajo e incidente?", opts:["No hay diferencia, son sinónimos","El accidente causa daño; el incidente es un suceso no deseado SIN daño pero con potencial de causarlo","El incidente es más grave que el accidente","El accidente es solo de tráfico"], a:1, exp:"El incidente (o 'casi accidente') es un aviso de peligro sin daño real. Estudiar los incidentes es crucial para prevenir futuros accidentes." },
  { id:3, block:"Conceptos Generales", difficulty:"medio", q:"¿Cuál es la jerarquía correcta de medidas preventivas según la LPRL?", opts:["EPIs → Protección colectiva → Eliminar el riesgo","Eliminar el riesgo → Sustituir → Protección colectiva → EPIs → Información","Formación → EPIs → Señalización","Señalización → EPIs → Evacuación"], a:1, exp:"La Ley de Prevención de Riesgos Laborales establece una jerarquía: primero ELIMINAR el riesgo en origen, luego sustituir, después protección colectiva, y como último recurso los EPIs." },
  { id:4, block:"Conceptos Generales", difficulty:"fácil", q:"¿Qué ley regula la prevención de riesgos laborales en España?", opts:["Ley 31/1995 LPRL","Ley Orgánica 5/2000","Real Decreto 379/2001","Ley 14/1986 General de Sanidad"], a:0, exp:"La Ley 31/1995 de Prevención de Riesgos Laborales (LPRL) es la norma básica en España que regula las obligaciones de empresarios y trabajadores en materia de seguridad laboral." },
  { id:5, block:"Conceptos Generales", difficulty:"medio", q:"¿Quién tiene la obligación principal de garantizar la seguridad en el almacén?", opts:["Solo el trabajador","Solo el delegado de prevención","El empresario, aunque los trabajadores también tienen obligaciones","Solo el servicio de prevención ajeno"], a:2, exp:"El empresario tiene la obligación principal (deber de protección), pero los trabajadores también tienen obligaciones: usar correctamente EPIs, comunicar riesgos, etc." },
  { id:6, block:"Conceptos Generales", difficulty:"difícil", q:"¿Qué es el 'índice de frecuencia' de accidentes?", opts:["El número total de accidentes al año","Número de accidentes x 1.000.000 / horas trabajadas","Días perdidos por accidente / total trabajadores","Porcentaje de trabajadores accidentados"], a:1, exp:"El índice de frecuencia (IF) = (Nº accidentes × 1.000.000) / Horas trabajadas. Permite comparar la siniestralidad entre empresas de diferente tamaño." },
  { id:7, block:"Conceptos Generales", difficulty:"medio", q:"¿Qué es la 'enfermedad profesional' a diferencia del accidente de trabajo?", opts:["Es lo mismo que un accidente de trabajo","Se contrae a consecuencia del trabajo habitual, de forma lenta y progresiva, estando en el listado oficial","Cualquier enfermedad que sufre un trabajador","Solo la producida por productos químicos"], a:1, exp:"La enfermedad profesional se contrae lentamente por la exposición repetida a agentes del trabajo (ruido, químicos, posturas). Debe estar en el listado del RD 1299/2006." },
  { id:8, block:"Conceptos Generales", difficulty:"fácil", q:"¿Qué significa 'cultura preventiva' en una empresa?", opts:["Tener contratado un servicio de prevención","La integración de la prevención en todas las decisiones y niveles de la empresa","Hacer cursos de seguridad una vez al año","Tener el plan de emergencia colgado en la pared"], a:1, exp:"La cultura preventiva implica que la seguridad forma parte del ADN de la empresa: todas las decisiones (diseño, compras, RRHH) contemplan la prevención de riesgos." },
  { id:9, block:"Técnicas de Seguridad", difficulty:"fácil", q:"¿Qué es la seguridad PREVENTIVA?", opts:["La que actúa DESPUÉS del accidente para reducir daños","La que actúa ANTES del accidente para eliminarlo o reducirlo","La que usa solo EPIs","La que solo contempla incendios"], a:1, exp:"La seguridad preventiva actúa en el ORIGEN del riesgo, antes de que ocurra el accidente. Es la más eficaz y prioritaria según la jerarquía de medidas." },
  { id:10, block:"Técnicas de Seguridad", difficulty:"fácil", q:"¿Cuál de estos es un ejemplo de PROTECCIÓN COLECTIVA?", opts:["Casco de seguridad","Barandilla en muelle de carga","Guantes de manipulación","Arnés anticaída"], a:1, exp:"La protección colectiva protege a TODOS los trabajadores sin necesitar equiparse individualmente. Las barandillas, redes, cubiertas de huecos son ejemplos clave." },
  { id:11, block:"Técnicas de Seguridad", difficulty:"medio", q:"¿Por qué se prefiere la protección colectiva a los EPIs?", opts:["Porque los EPIs son más caros","Porque la protección colectiva no requiere la cooperación del trabajador y protege a todos","Porque los EPIs son menos efectivos","No se prefiere, los EPIs son siempre la primera opción"], a:1, exp:"La protección colectiva es preferible porque actúa independientemente del comportamiento del trabajador. Los EPIs dependen de su uso correcto y constante." },
  { id:12, block:"Técnicas de Seguridad", difficulty:"medio", q:"¿Qué técnica analiza sistemáticamente los puestos de trabajo para identificar riesgos?", opts:["Inspección de seguridad","Análisis estadístico de accidentes","Investigación de accidentes","Observación del trabajo"], a:0, exp:"La inspección de seguridad es la técnica analítica que examina sistemáticamente los puestos, instalaciones y procesos para detectar situaciones peligrosas antes de que causen daño." },
  { id:13, block:"Técnicas de Seguridad", difficulty:"difícil", q:"¿Qué es el método FINE para evaluación de riesgos?", opts:["Un método de extinción de incendios","Un método que valora el riesgo = Consecuencias × Exposición × Probabilidad","Un sistema de señalización de emergencias","Un protocolo de primeros auxilios"], a:1, exp:"El método FINE calcula el Grado de Peligrosidad (GP) = Consecuencias × Exposición × Probabilidad. Permite priorizar las intervenciones según el nivel de riesgo." },
  { id:14, block:"Técnicas de Seguridad", difficulty:"medio", q:"¿Qué debe incluir la investigación de un accidente de trabajo?", opts:["Solo la descripción del daño causado","El análisis de las causas para evitar que se repita","Solo el parte de baja médica","Solo los datos del trabajador accidentado"], a:1, exp:"La investigación de accidentes busca las CAUSAS reales (no culpables) para implementar medidas correctoras. Debe analizar causas directas, básicas y raíz." },
  { id:15, block:"Técnicas de Seguridad", difficulty:"fácil", q:"¿Qué es el 'orden y limpieza' como medida de seguridad (metodología 5S)?", opts:["Una norma estética sin impacto en seguridad","Una metodología que reduce accidentes al eliminar obstáculos, derrames y desorden","Solo obligatorio en almacenes de alimentos","Una normativa solo para almacenes mayores de 500 m²"], a:1, exp:"El orden y limpieza (metodología 5S japonesa) es una de las medidas más efectivas: elimina tropiezos, facilita evacuaciones, previene incendios y mejora la eficiencia." },
  { id:16, block:"EPIs", difficulty:"fácil", q:"¿Qué significa EPI?", opts:["Equipo de Prevención de Incendios","Equipo de Protección Individual","Estándar de Protección Industrial","Equipo de Primeros Intervencion"], a:1, exp:"EPI = Equipo de Protección Individual. Son dispositivos destinados a ser llevados por el trabajador para protegerle de uno o varios riesgos. Regulados por el RD 773/1997." },
  { id:17, block:"EPIs", difficulty:"fácil", q:"¿Cuándo debe usar EPIs un trabajador del almacén?", opts:["Solo cuando él lo decida","Solo en caso de inspección de trabajo","Siempre que el riesgo no pueda eliminarse con medidas colectivas","Solo cuando lo indique el jefe directo"], a:2, exp:"Los EPIs son obligatorios cuando los riesgos no se pueden eliminar o controlar suficientemente con medidas de protección colectiva. Su uso es obligatorio por ley." },
  { id:18, block:"EPIs", difficulty:"medio", q:"¿Qué EPI protege frente a objetos que caen sobre la cabeza?", opts:["Gafas de seguridad","Casco de seguridad clase E","Protector auditivo","Pantalla facial"], a:1, exp:"El casco de seguridad clase E (energía) protege frente a impactos de objetos que caen. Es obligatorio en zonas de estanterías altas, trabajo con carretillas y muelles de carga." },
  { id:19, block:"EPIs", difficulty:"medio", q:"¿Qué protección auditiva se usa cuando el nivel de ruido supera los 85 dB?", opts:["No es necesaria ninguna protección hasta 100 dB","Tapones auditivos y/o auriculares de seguridad","Solo señalización de zona ruidosa","Cascos de comunicación"], a:1, exp:"A partir de 85 dB(A) es obligatorio proporcionar protección auditiva. Los tapones de espuma o los auriculares de copa son los más comunes en almacenes con maquinaria." },
  { id:20, block:"EPIs", difficulty:"fácil", q:"¿Qué característica DEBE tener el calzado de seguridad en un almacén?", opts:["Solo debe ser antideslizante","Punta de acero (200 J de resistencia) y suela resistente a la perforación","Solo debe ser cómodo","Cualquier calzado cerrado es válido"], a:1, exp:"El calzado de seguridad para almacén debe tener puntera metálica resistente a 200 J y suela antiperforación. Se clasifica por categorías (S1, S1P, S2, S3) según prestaciones." },
  { id:21, block:"EPIs", difficulty:"medio", q:"¿Qué tipo de guantes se usan para manipulación de cargas con riesgo de corte?", opts:["Guantes de látex de cirujano","Guantes anticorte nivel 3-5 según norma EN388","Guantes de algodón","Guantes de goma para limpieza"], a:1, exp:"Los guantes anticorte se clasifican según EN388. Para almacén con manipulación de cajas/palets con cantos cortantes se requieren guantes de nivel 3 o superior." },
  { id:22, block:"EPIs", difficulty:"difícil", q:"¿Cuál es la obligación del EMPRESARIO respecto a los EPIs?", opts:["Solo proporcionarlos","Proporcionar, mantener, reponer, formar en su uso y vigilar que se usan correctamente","Solo informar de su existencia","Compartirlos entre trabajadores para ahorrar costes"], a:1, exp:"El empresario debe: proporcionar EPIs gratuitos, asegurarse de su idoneidad, mantenerlos en buen estado, reponer los deteriorados, formar en su uso correcto y vigilar su utilización." },
  { id:23, block:"EPIs", difficulty:"fácil", q:"¿El chaleco reflectante es un EPI obligatorio en almacenes con tráfico de carretillas?", opts:["No, es opcional","Sí, para garantizar la visibilidad del peatón ante los operadores de carretilla","Solo de noche","Solo en almacenes al aire libre"], a:1, exp:"El chaleco reflectante (alta visibilidad) es obligatorio en zonas con tráfico de carretillas para que el operador pueda detectar al peatón a tiempo y evitar atropellos." },
  { id:24, block:"EPIs", difficulty:"medio", q:"¿Cuándo es obligatorio el arnés de seguridad en el almacén?", opts:["Siempre que se trabaje de pie","En trabajos en altura a partir de 2 metros cuando no hay protección colectiva","Solo si el trabajador lo pide","A partir de 4 metros de altura"], a:1, exp:"El arnés anticaída es obligatorio en trabajos en altura desde 2 metros cuando no existen protecciones colectivas (barandillas, redes). Debe anclarse a puntos certificados." },
  { id:25, block:"Señalización", difficulty:"fácil", q:"¿Qué forma y colores tienen las señales de PROHIBICIÓN?", opts:["Triángulo amarillo con símbolo negro","Círculo con fondo blanco, banda y símbolo rojos","Rectángulo verde con símbolo blanco","Cuadrado azul con símbolo blanco"], a:1, exp:"Las señales de prohibición: forma circular, fondo blanco, banda diagonal y borde rojos, símbolo negro. Ejemplos: prohibido fumar, prohibido el paso de peatones." },
  { id:26, block:"Señalización", difficulty:"fácil", q:"¿Qué señal indica la ubicación de un extintor de incendios?", opts:["Señal amarilla triangular","Señal azul cuadrada","Señal roja rectangular con símbolo blanco","Señal verde rectangular"], a:2, exp:"Las señales de lucha contra incendios (extintores, BIEs, pulsadores de alarma) son rectangulares o cuadradas con FONDO ROJO y símbolo blanco." },
  { id:27, block:"Señalización", difficulty:"fácil", q:"¿Qué color identifica las señales de ADVERTENCIA O PELIGRO?", opts:["Rojo","Azul","Amarillo/naranja con triángulo negro","Verde"], a:2, exp:"Las señales de advertencia tienen forma triangular, fondo amarillo y símbolo negro. Alertan de un peligro: suelo resbaladizo, cargas suspendidas, alta tensión, etc." },
  { id:28, block:"Señalización", difficulty:"fácil", q:"¿Qué color identifica las señales de OBLIGACIÓN (EPIs)?", opts:["Amarillo","Verde","Rojo","Azul con símbolo blanco"], a:3, exp:"Las señales de obligación tienen forma circular, fondo azul y símbolo blanco. Indican uso obligatorio de EPI: casco, guantes, calzado, etc." },
  { id:29, block:"Señalización", difficulty:"medio", q:"¿Qué color se usa para marcar en el suelo los pasillos peatonales?", opts:["Rojo","Blanco","Amarillo","Azul"], a:2, exp:"Las líneas amarillas en el suelo delimitan los pasillos y zonas de tráfico de personas y vehículos en el almacén. El amarillo es el estándar internacional para vías de tránsito." },
  { id:30, block:"Señalización", difficulty:"medio", q:"¿A qué altura mínima deben colocarse las señales en zonas de paso?", opts:["A nivel del suelo","Entre 1,7 y 2,1 metros","Siempre por encima de 3 metros","No existe altura regulada"], a:1, exp:"La normativa recomienda colocar señales a una altura de entre 1,7 y 2,1 metros para que sean visibles sin obstaculizar el paso. Deben ser visibles desde lejos." },
  { id:31, block:"Señalización", difficulty:"difícil", q:"¿Qué RD regula la señalización de seguridad y salud en el trabajo?", opts:["RD 485/1997","RD 773/1997","RD 486/1997","RD 1215/1997"], a:0, exp:"El Real Decreto 485/1997 regula las disposiciones mínimas en materia de señalización de seguridad y salud en el trabajo, estableciendo tipos, colores y formas." },
  { id:32, block:"Señalización", difficulty:"medio", q:"¿Las señales de SALVAMENTO Y SOCORRO qué forma y color tienen?", opts:["Círculo azul","Triángulo rojo","Rectángulo o cuadrado verde con símbolo blanco","Círculo amarillo"], a:2, exp:"Las señales de salvamento (salidas de emergencia, duchas de seguridad, camillas) son rectangulares o cuadradas con fondo verde y símbolo blanco." },
  { id:33, block:"Diseño del Almacén", difficulty:"fácil", q:"¿Cuál es la anchura mínima de pasillo para tráfico de peatones SOLO?", opts:["0,5 metros","1 metro","1,5 metros","2 metros"], a:1, exp:"Los pasillos exclusivamente peatonales deben tener como mínimo 1 metro de anchura. En zonas de alta frecuencia de paso se recomienda ampliar a 1,2-1,5 metros." },
  { id:34, block:"Diseño del Almacén", difficulty:"fácil", q:"¿Cuál es la anchura mínima para pasillos con carretillas en DOBLE sentido?", opts:["1,5 metros","2 metros","3 metros","4 metros"], a:2, exp:"Los pasillos con tráfico de carretillas en doble sentido requieren al menos 3 metros de anchura para permitir el cruce seguro y la visibilidad mutua de los operadores." },
  { id:35, block:"Diseño del Almacén", difficulty:"medio", q:"¿Qué iluminación mínima se requiere en las zonas de trabajo del almacén?", opts:["50 lux","100 lux","200 lux","500 lux"], a:2, exp:"El RD 486/1997 establece 200 lux como nivel mínimo en zonas de trabajo de almacén. Los puestos con tareas de mayor detalle pueden requerir 500 lux o más." },
  { id:36, block:"Diseño del Almacén", difficulty:"medio", q:"¿Qué distancia debe mantenerse entre la mercancía y el techo del almacén?", opts:["No hay distancia regulada","Mínimo 0,5 metros","Mínimo 1 metro","Mínimo 2 metros"], a:1, exp:"Debe mantenerse una separación mínima de 0,5 metros entre la mercancía y los sprinklers o el techo para que los sistemas antiincendios funcionen eficazmente." },
  { id:37, block:"Diseño del Almacén", difficulty:"fácil", q:"¿Qué distancia máxima puede haber entre extintores portátiles?", opts:["10 metros","15 metros","20 metros","25 metros"], a:1, exp:"El Reglamento de instalaciones de protección contra incendios establece que la distancia máxima de recorrido desde cualquier punto hasta un extintor no debe superar 15 metros." },
  { id:38, block:"Diseño del Almacén", difficulty:"medio", q:"¿Por qué deben estar ancladas las estanterías metálicas al suelo o a la pared?", opts:["Por estética","Para evitar vuelcos que pueden causar aplastamientos y caídas de carga","Para facilitar la limpieza","Es opcional en estanterías de menos de 3 metros"], a:1, exp:"El anclaje es obligatorio para evitar el vuelco de las estanterías, que puede causar accidentes gravísimos (aplastamiento). El anclaje debe ser revisado periódicamente." },
  { id:39, block:"Diseño del Almacén", difficulty:"difícil", q:"¿Qué información MÍNIMA debe indicar el cartel de carga máxima de una estantería?", opts:["Solo la carga total de la estantería","Carga máxima por balda, por módulo y total; peso máximo del palet","Solo el material de fabricación","Solo el nombre del fabricante"], a:1, exp:"Cada estantería debe indicar la carga máxima autorizada por balda, por módulo y total. Superar estos límites puede provocar el colapso de la estructura." },
  { id:40, block:"Diseño del Almacén", difficulty:"fácil", q:"¿Para qué sirven los protectores de esquina en las estanterías?", opts:["Solo son decorativos","Para proteger los montantes del impacto de carretillas y evitar su deformación","Para anclar la estantería al suelo","Para indicar la carga máxima"], a:1, exp:"Los protectores de esquina (generalmente de acero o polietileno) absorben los impactos de las carretillas y evitan que se dañen o deformen los montantes de la estantería." },
  { id:41, block:"Accidentes", difficulty:"fácil", q:"¿Cuál es el accidente más frecuente en almacenes?", opts:["Incendios","Caídas al mismo nivel y sobreesfuerzos","Explosiones de productos químicos","Caídas desde gran altura"], a:1, exp:"Las caídas al mismo nivel (tropiezos, resbalones) y los sobreesfuerzos por manipulación manual de cargas son estadísticamente los accidentes más frecuentes en almacenes." },
  { id:42, block:"Accidentes", difficulty:"medio", q:"¿Qué causa principal producen los accidentes por SOBREESFUERZO en almacén?", opts:["Exceso de velocidad de carretillas","Manipulación manual de cargas sin técnica correcta y superando límites recomendados","Exposición a ruido excesivo","Iluminación insuficiente"], a:1, exp:"Los sobreesfuerzos son causados por levantar cargas sin doblar rodillas, girar el tronco con carga, cargas superiores a 25 kg o tareas repetitivas sin rotación." },
  { id:43, block:"Accidentes", difficulty:"fácil", q:"¿Qué es un accidente 'in itinere'?", opts:["El que ocurre dentro del almacén","El que ocurre en el trayecto habitual entre el domicilio y el trabajo","El que ocurre durante la pausa del bocadillo","El accidente con carretilla"], a:1, exp:"El accidente in itinere ocurre en el camino entre el domicilio y el centro de trabajo (y viceversa), siguiendo el trayecto habitual. Está reconocido como accidente laboral." },
  { id:44, block:"Accidentes", difficulty:"medio", q:"¿Qué tipo de lesión producen principalmente los atrapamientos con maquinaria?", opts:["Quemaduras","Amputaciones, aplastamientos y heridas graves","Solo contusiones leves","Solo daño a la maquinaria"], a:1, exp:"Los atrapamientos entre partes móviles de maquinaria o entre carga y estructura fija son accidentes graves que pueden causar amputaciones, aplastamientos y en casos extremos la muerte." },
  { id:45, block:"Accidentes", difficulty:"medio", q:"¿Cuál es la principal causa de accidentes con carretillas elevadoras?", opts:["Carretillas mal pintadas","Exceso de velocidad, maniobras inseguras y falta de visibilidad","Carretillas muy antiguas","Pasillos demasiado anchos"], a:1, exp:"La mayoría de accidentes con carretillas se deben a: exceso de velocidad, maniobras sin visión directa, falta de señalización acústica/luminosa y no respetar prioridades de paso." },
  { id:46, block:"Accidentes", difficulty:"difícil", q:"¿Qué es la 'caída de objetos por derrumbamiento'?", opts:["Una caída de personas desde estanterías","El colapso de una estantería o caída de mercancía mal ubicada sobre un trabajador","Una caída durante la carga de camiones","Ninguna de las anteriores"], a:1, exp:"La caída de objetos por derrumbamiento ocurre cuando la estantería colapsa o la mercancía cae por sobrecarga, mal apilado o impacto de carretillas. Es uno de los accidentes más graves del almacén." },
  { id:47, block:"Accidentes", difficulty:"fácil", q:"¿Qué medida BÁSICA previene las caídas al mismo nivel en pasillos?", opts:["Usar calzado de tacón","Mantener el orden, limpiar derrames inmediatamente y señalizar obstáculos","Solo usar iluminación especial","Correr menos por los pasillos"], a:1, exp:"La prevención de caídas al mismo nivel se basa en: orden y limpieza constante, limpieza inmediata de derrames, señalización de suelo mojado y eliminación de obstáculos en pasillos." },
  { id:48, block:"Evaluación de Riesgos", difficulty:"fácil", q:"¿Cuáles son los dos factores principales que determinan el nivel de riesgo?", opts:["Velocidad y distancia","Probabilidad de que ocurra el daño y severidad del daño","Número de trabajadores y turno","Antigüedad del equipo y marca"], a:1, exp:"El nivel de riesgo se evalúa combinando la PROBABILIDAD de que ocurra el accidente y la SEVERIDAD (gravedad) del daño que causaría si ocurriera." },
  { id:49, block:"Evaluación de Riesgos", difficulty:"medio", q:"¿Con qué frecuencia debe revisarse la evaluación de riesgos?", opts:["Solo una vez cuando se abre el almacén","Cuando se detecten daños a la salud, cambios en condiciones de trabajo o a instancia del Delegado de Prevención","Cada 10 años obligatoriamente","Solo si hay un accidente grave"], a:1, exp:"La evaluación de riesgos debe revisarse cuando cambien las condiciones de trabajo, se introduzca nueva maquinaria, se detecten daños a la salud o lo solicite el delegado de prevención." },
  { id:50, block:"Evaluación de Riesgos", difficulty:"medio", q:"¿Qué es un 'factor de riesgo'?", opts:["El accidente en sí mismo","Una condición o característica que incrementa la probabilidad de que ocurra un daño","El daño sufrido por el trabajador","La multa por incumplimiento"], a:1, exp:"Un factor de riesgo es cualquier elemento (condición de trabajo, comportamiento, agente físico/químico) que aumenta la probabilidad de que ocurra un accidente o enfermedad profesional." },
  { id:51, block:"Evaluación de Riesgos", difficulty:"difícil", q:"¿Qué diferencia hay entre riesgo TRIVIAL y riesgo INTOLERABLE?", opts:["Solo el número de trabajadores afectados","Trivial: no requiere acción; Intolerable: no se puede empezar ni continuar el trabajo hasta reducirlo","Son sinónimos","Solo depende del tipo de empresa"], a:1, exp:"Según la clasificación de riesgos: TRIVIAL (no se requiere acción), TOLERABLE (mejoras económicamente justificadas), MODERADO (medidas en plazo), IMPORTANTE (antes de inicio) e INTOLERABLE (paralización)." },
  { id:52, block:"Evaluación de Riesgos", difficulty:"medio", q:"¿Quién debe participar en la evaluación de riesgos?", opts:["Solo el técnico de prevención externo","Solo el empresario","El empresario, técnicos de prevención y los trabajadores o sus representantes","Solo los mandos intermedios"], a:2, exp:"La evaluación de riesgos debe ser participativa. Los trabajadores conocen mejor que nadie los riesgos reales de su puesto. Los delegados de prevención deben ser consultados." },
  { id:53, block:"Evaluación de Riesgos", difficulty:"difícil", q:"¿Qué es el 'plan de prevención de riesgos laborales'?", opts:["Un listado de EPIs de la empresa","El documento que integra la prevención en la empresa: política, organización, procedimientos y recursos","Solo el plan de emergencia","El registro de accidentes del año"], a:1, exp:"El Plan de Prevención es el documento maestro que integra la PRL en la empresa: política preventiva, organización, procedimientos de trabajo, recursos asignados y evaluación de riesgos." },
  { id:54, block:"Carga y Descarga", difficulty:"fácil", q:"¿Qué riesgo principal existe al trabajar en el muelle de carga con camiones?", opts:["Estrés por monotonía","Caídas desde el muelle o desde la caja del camión","Exceso de iluminación","Temperatura excesiva siempre"], a:1, exp:"El muelle de carga es una zona de alto riesgo de caídas (diferencia de nivel entre muelle y caja del camión), atropellos y golpes con mercancía. Requiere señalización y EPIs específicos." },
  { id:55, block:"Carga y Descarga", difficulty:"medio", q:"¿Qué es una 'rampas niveladora' o 'rampa de muelle'?", opts:["Una señal de advertencia en el muelle","Un dispositivo que salva el desnivel entre el suelo del muelle y el suelo del camión","Un tipo de carretilla para muelles","Una protección anticaída"], a:1, exp:"La rampa niveladora (dock leveler) es un dispositivo hidráulico o mecánico que crea un puente entre el muelle y el camión, eliminando el desnivel y permitiendo el paso seguro de carretillas." },
  { id:56, block:"Carga y Descarga", difficulty:"medio", q:"¿Qué medida previene el movimiento accidental del camión durante la carga/descarga?", opts:["Señalizar el área","Calzar las ruedas del camión y usar frenos de estacionamiento","Solo avisar al conductor","Cerrar las puertas del almacén"], a:1, exp:"El calzado de ruedas (cuñas) y el freno de estacionamiento son obligatorios para inmovilizar el camión durante las operaciones. Un camión que se mueve puede causar accidentes gravísimos." },
  { id:57, block:"Carga y Descarga", difficulty:"medio", q:"¿Qué significa 'estiba correcta' de la mercancía?", opts:["Colocar la mercancía lo más alto posible","Acomodar y asegurar la mercancía de forma que no pueda moverse, caer o dañarse durante el transporte","Solo etiquetar la mercancía","Solo pesar la mercancía"], a:1, exp:"La estiba es la colocación y sujeción segura de la carga. Una mala estiba puede causar vuelco del camión, caída de carga sobre trabajadores y daños a la mercancía." },
  { id:58, block:"Carga y Descarga", difficulty:"difícil", q:"¿Qué carga máxima permite una carretilla contrapesada estándar de 2.500 kg en el centro de carga?", opts:["Siempre 2.500 kg independientemente de la altura de elevación","La carga máxima disminuye al elevar la carga, según el diagrama de carga del fabricante","La carga máxima aumenta al elevar","No existe límite si la carga está centrada"], a:1, exp:"La capacidad de carga de una carretilla disminuye a medida que se eleva la horquilla. Siempre debe consultarse el diagrama de carga del fabricante antes de elevar cargas pesadas." },
  { id:59, block:"Carga y Descarga", difficulty:"medio", q:"¿Qué distancia de seguridad mínima se recomienda entre carretillas en movimiento?", opts:["No existe distancia regulada","Al menos la distancia de frenado total a la velocidad de circulación (aprox. 3 longitudes del vehículo)","50 centímetros","5 metros siempre"], a:1, exp:"La distancia de seguridad entre carretillas debe ser equivalente a la distancia de frenado completo a la velocidad de circulación, generalmente unas 3 longitudes del vehículo." },
  { id:60, block:"Mercancías APQ", difficulty:"fácil", q:"¿Qué significa APQ?", opts:["Almacenamiento Previo de Cualquier mercancía","Almacenamiento de Productos Químicos","Análisis de Productos de Calidad","Almacenamiento de Productos en Cuarentena"], a:1, exp:"APQ = Almacenamiento de Productos Químicos. Regulado por el RD 379/2001 (ITC-MIE-APQ 1 a 7). Establece requisitos para almacenar líquidos inflamables, GLP, sólidos peligrosos, etc." },
  { id:61, block:"Mercancías APQ", difficulty:"medio", q:"¿Qué es la Ficha de Datos de Seguridad (FDS)?", opts:["El precio del producto químico","El documento que informa sobre peligros, propiedades, medidas de seguridad y actuación en emergencias para un producto químico","Solo la etiqueta del producto","El certificado de calidad del producto"], a:1, exp:"La FDS (Safety Data Sheet) es un documento obligatorio que debe acompañar a los productos químicos. Tiene 16 secciones y contiene toda la información de seguridad, emergencia y manejo." },
  { id:62, block:"Mercancías APQ", difficulty:"fácil", q:"¿Qué símbolo indica que un producto es INFLAMABLE según el SGA?", opts:["Una calavera","Una llama naranja sobre fondo blanco","Un círculo con una llama","Un signo de exclamación"], a:1, exp:"El pictograma de llama (GHS02) indica productos inflamables, gases inflamables, aerosoles inflamables, líquidos y sólidos inflamables en el Sistema Globalmente Armonizado (SGA/GHS)." },
  { id:63, block:"Mercancías APQ", difficulty:"medio", q:"¿Pueden almacenarse juntos productos oxidantes e inflamables?", opts:["Sí, si están bien etiquetados","No, porque la combinación puede provocar incendios o explosiones violentas","Sí, si hay ventilación suficiente","Solo si están en pequeñas cantidades"], a:1, exp:"Los productos oxidantes y los inflamables son INCOMPATIBLES: los oxidantes aportan oxígeno que acelera la combustión. Deben almacenarse separados y siguiendo las tablas de incompatibilidades." },
  { id:64, block:"Mercancías APQ", difficulty:"difícil", q:"¿Qué categoría ADR clasifica las materias inflamables líquidas para transporte?", opts:["Clase 1","Clase 3","Clase 8","Clase 9"], a:1, exp:"La clase 3 del ADR (Acuerdo Europeo de Transporte de Mercancías Peligrosas por Carretera) corresponde a líquidos inflamables como gasolina, acetona, alcohol, etc." },
  { id:65, block:"Mercancías APQ", difficulty:"medio", q:"Ante un derrame de producto químico en el almacén, ¿cuál es la primera acción?", opts:["Limpiar inmediatamente con agua","Ventilar la zona, evacuar y consultar la FDS antes de actuar","Cubrir con serrín sin protección","Mezclar con agua para diluir"], a:1, exp:"Ante un derrame: 1) EVACUAR la zona, 2) VENTILAR, 3) CONSULTAR la FDS para saber el producto y sus riesgos, 4) USAR los EPIs indicados en la FDS, 5) Aplicar el procedimiento indicado." },
  { id:66, block:"Mercancías APQ", difficulty:"fácil", q:"¿Qué pictograma SGA indica PELIGRO DE TOXICIDAD AGUDA (veneno)?", opts:["Una llama","Una calavera con tibias cruzadas","Un árbol muerto","Un signo de exclamación"], a:1, exp:"La calavera con tibias cruzadas (GHS06) indica toxicidad aguda grave: puede causar la muerte o daño grave por ingestión, inhalación o contacto cutáneo." },
  { id:67, block:"Mercancías APQ", difficulty:"medio", q:"¿Qué significa el pictograma de 'árbol muerto con pez'?", opts:["Producto radiactivo","Peligro medioambiental: tóxico para organismos acuáticos","Producto corrosivo","Producto irritante"], a:1, exp:"El pictograma de árbol muerto y pez (GHS09) indica peligro para el medio ambiente acuático. Estos productos no pueden verterse por el desagüe y requieren gestión como residuo peligroso." },
  { id:68, block:"Ergonomía", difficulty:"fácil", q:"¿Qué estudia la ergonomía?", opts:["Solo el diseño de mobiliario de oficina","La adaptación del trabajo a las capacidades y limitaciones del ser humano","Solo el levantamiento de cargas","Solo la iluminación de los puestos"], a:1, exp:"La ergonomía estudia la interacción entre el ser humano y su entorno de trabajo para diseñar sistemas que maximicen la seguridad, salud, eficiencia y bienestar del trabajador." },
  { id:69, block:"Ergonomía", difficulty:"fácil", q:"¿Cuál es el peso máximo recomendado para manipulación manual de cargas en HOMBRES?", opts:["15 kg","25 kg","40 kg","50 kg"], a:1, exp:"El RD 487/1997 establece que cargas superiores a 25 kg para hombres (15 kg para mujeres) pueden suponer un riesgo. En condiciones no ideales (giro, lejanía del cuerpo) el límite es menor." },
  { id:70, block:"Ergonomía", difficulty:"fácil", q:"¿Cuál es el peso máximo recomendado para manipulación manual de cargas en MUJERES?", opts:["5 kg","10 kg","15 kg","25 kg"], a:2, exp:"Para mujeres el límite es 15 kg en condiciones ideales. En condiciones desfavorables (lejos del cuerpo, con giro de tronco, en altura o en foso) los límites se reducen considerablemente." },
  { id:71, block:"Ergonomía", difficulty:"medio", q:"¿Cuál es la técnica correcta para levantar una carga pesada del suelo?", opts:["Doblar la espalda con piernas rectas","Doblar las rodillas manteniendo la espalda recta y la carga cerca del cuerpo","Girar el tronco mientras se levanta","Levantar rápidamente para reducir el tiempo de esfuerzo"], a:1, exp:"La técnica correcta: pies separados al ancho de hombros, doblar RODILLAS (no espalda), espalda recta, carga cerca del cuerpo, levantarse usando las piernas. Nunca girar el tronco con carga." },
  { id:72, block:"Ergonomía", difficulty:"medio", q:"¿Qué son los TME (Trastornos Músculo-Esqueléticos)?", opts:["Enfermedades mentales relacionadas con el trabajo","Lesiones que afectan músculos, tendones, nervios y articulaciones causadas por el trabajo repetitivo o sobreesfuerzos","Solo las hernias de disco","Solo los esguinces de tobillo"], a:1, exp:"Los TME incluyen: hernias discales, tendinitis, síndrome del túnel carpiano, epicondilitis, etc. Son la primera causa de baja laboral en España y muy frecuentes en almacenes." },
  { id:73, block:"Ergonomía", difficulty:"difícil", q:"¿Qué evalúa el método REBA?", opts:["El riesgo de incendio","La carga postural en el cuerpo entero, especialmente útil en tareas de manipulación manual","La exposición a ruido","La calidad del aire interior"], a:1, exp:"El método REBA (Rapid Entire Body Assessment) evalúa la carga postural en tareas que implican al cuerpo entero, como las de manipulación manual en almacenes, puntuando el riesgo de TME." },
  { id:74, block:"Ergonomía", difficulty:"medio", q:"¿Qué es la 'carga mental' en el trabajo del almacén?", opts:["El peso de los documentos que lleva el trabajador","El esfuerzo cognitivo requerido (atención, toma de decisiones, memoria) que puede generar fatiga mental y errores","Solo el estrés por jefes","Solo trabajar de noche"], a:1, exp:"La carga mental implica el nivel de procesamiento cognitivo exigido: atención para no cometer errores, decisiones bajo presión de tiempo, manejo de información. Puede causar fatiga y aumentar el riesgo." },
  { id:75, block:"Ergonomía", difficulty:"medio", q:"¿Qué medida ergonómica ayuda a prevenir los TME en tareas repetitivas?", opts:["Aumentar el ritmo de trabajo","La rotación de puestos de trabajo para usar grupos musculares diferentes","Solo el uso de fajas lumbares","Eliminar las pausas de descanso"], a:1, exp:"La rotación de puestos permite que el trabajador alterne tareas que implican diferentes grupos musculares, reduciendo la fatiga y el riesgo de lesión por repetición." },
  { id:76, block:"Riesgos Psicosociales", difficulty:"fácil", q:"¿Qué son los riesgos psicosociales en el almacén?", opts:["Solo los accidentes físicos graves","Factores organizativos y relacionales que afectan a la salud mental y pueden aumentar el riesgo de accidente (estrés, fatiga, acoso)","Solo el trabajo nocturno","Solo el ruido excesivo"], a:1, exp:"Los riesgos psicosociales derivan de las condiciones de organización del trabajo (carga, turnos, relaciones) y afectan a la salud mental, aumentando indirectamente el riesgo de accidente." },
  { id:77, block:"Riesgos Psicosociales", difficulty:"medio", q:"¿Qué es el 'burnout' o síndrome de desgaste profesional?", opts:["Un accidente físico grave","Un estado de agotamiento físico, mental y emocional crónico derivado del trabajo, con despersonalización y baja realización personal","Un tipo de enfermedad contagiosa","Un accidente de tráfico laboral"], a:1, exp:"El burnout (Maslach) se caracteriza por: agotamiento emocional, despersonalización (trato frío) y baja realización personal. Es frecuente en trabajos con alta exigencia y poco control." },
  { id:78, block:"Riesgos Psicosociales", difficulty:"fácil", q:"¿Cómo afecta la FATIGA al riesgo de accidente en el almacén?", opts:["No afecta, el trabajador se adapta","Reduce la atención y los reflejos, aumentando significativamente el riesgo de accidente","Solo aumenta el absentismo","Solo afecta a la calidad del trabajo, no a la seguridad"], a:1, exp:"La fatiga disminuye la capacidad de atención, prolonga el tiempo de reacción y aumenta los errores. Un trabajador fatigado tiene un riesgo de accidente hasta 3 veces mayor." },
  { id:79, block:"Riesgos Psicosociales", difficulty:"medio", q:"¿Qué es el 'mobbing' o acoso laboral?", opts:["Un tipo de accidente de trabajo","Conducta abusiva, repetida y sistemática dirigida a hostigar psicológicamente a un trabajador","Un ruido específico del almacén","Una técnica de carga de mercancía"], a:1, exp:"El mobbing es el acoso psicológico laboral: conductas repetidas que dañan la dignidad del trabajador. Genera ansiedad, depresión y puede causar bajas de larga duración." },
  { id:80, block:"Riesgos Psicosociales", difficulty:"difícil", q:"¿Qué variables organizativas pueden generar estrés en trabajadores de almacén?", opts:["Solo el tipo de mercancía que se manipula","Turnos nocturnos o rotatorios, presión de tiempo, falta de autonomía, incertidumbre laboral y conflictos de rol","Solo el salario","Solo las relaciones con clientes"], a:1, exp:"Los estresores organizativos incluyen: turnos antisociales, alta demanda con bajo control, monotonía, presión por objetivos, inseguridad laboral y conflictos de rol o interpersonales." },
  { id:81, block:"Incendios", difficulty:"fácil", q:"¿Cuáles son los tres elementos del 'triángulo del fuego'?", opts:["Calor, viento y agua","Combustible, comburente (oxígeno) y energía de ignición","Madera, plástico y papel","Gas, electricidad y madera"], a:1, exp:"El triángulo del fuego: COMBUSTIBLE (material que arde), COMBURENTE (generalmente oxígeno del aire) y ENERGÍA DE IGNICIÓN (chispa, llama, calor). Eliminar uno de los tres extingue el fuego." },
  { id:82, block:"Incendios", difficulty:"medio", q:"¿Qué agente extintor se usa para fuegos eléctricos (clase E)?", opts:["Agua en chorro","CO₂ (dióxido de carbono) o polvo BC","Espuma","Solo arena"], a:1, exp:"Para fuegos con equipos eléctricos bajo tensión se usa CO₂ o polvo BC porque son no conductores. NUNCA se usa agua porque puede causar electrocución y cortocircuitos." },
  { id:83, block:"Incendios", difficulty:"fácil", q:"¿Cuándo debe revisarse un extintor portátil?", opts:["Cada 5 años","Cada año como mínimo (revisión trimestral visual + anual por empresa especializada)","Solo después de usarlo","Cada 3 meses siempre por empresa especializada"], a:1, exp:"Los extintores requieren: inspección visual cada 3 meses (por la empresa), revisión anual por empresa especializada y retimbrado cada 5 años." },
  { id:84, block:"Incendios", difficulty:"medio", q:"¿Qué es un BIE?", opts:["Un tipo de carretilla","Boca de Incendio Equipada: sistema fijo de extinción con manguera, manómetro y válvula","Un extintor portátil grande","Un detector de humos"], a:1, exp:"La BIE (Boca de Incendio Equipada) es un sistema fijo compuesto por: armario, manguera de 20-25 mm, manómetro y lanza. Proporciona agua a presión para la extinción inicial de incendios." },
  { id:85, block:"Incendios", difficulty:"fácil", q:"¿Qué son los detectores de IONIZACIÓN?", opts:["Detectores de temperatura","Detectores que detectan partículas invisibles de humo generadas en combustión activa (llama viva)","Detectores de gas","Detectores de luz"], a:1, exp:"Los detectores de ionización detectan partículas de combustión del humo en sus fases iniciales (fuego con llama). Son más sensibles a fuegos rápidos y con llama activa." },
  { id:86, block:"Incendios", difficulty:"medio", q:"¿Qué significa la letra 'A' en la clasificación de fuegos?", opts:["Metales","Sólidos (madera, papel, tela, plástico)","Líquidos inflamables","Gases"], a:1, exp:"Clase A: fuegos de sólidos (madera, papel, cartón, tejidos, plástico). El agente extintor preferente es el AGUA. Clase B: líquidos. Clase C: gases. Clase D: metales. Clase F: aceites." },
  { id:87, block:"Incendios", difficulty:"difícil", q:"¿Qué es un sistema de SPRINKLERS?", opts:["Un tipo de extintor portátil","Sistema automático de extinción por agua que se activa térmicamente cuando detecta calor","Un tipo de detector de humos","Un sistema de ventilación antiincendios"], a:1, exp:"Los sprinklers son rociadores automáticos que se activan individualmente al alcanzar una temperatura de fusión del elemento termosensible (68°C-93°C), pulverizando agua sobre el foco de incendio." },
  { id:88, block:"Primeros Auxilios", difficulty:"fácil", q:"¿Qué significa la regla PAS?", opts:["Prevenir, Actuar, Sanar","Proteger, Alertar, Socorrer","Parar, Ayudar, Señalizar","Primero, Asistir, Salvar"], a:1, exp:"PAS: PROTEGER la zona del accidente (evitar más víctimas), ALERTAR al 112 con la información necesaria, SOCORRER al herido con los conocimientos disponibles. SIEMPRE en este orden." },
  { id:89, block:"Primeros Auxilios", difficulty:"fácil", q:"¿Cuáles son los signos de la parada cardiorrespiratoria (PCR)?", opts:["Dolor de cabeza y mareos","Inconsciencia, ausencia de respiración normal y ausencia de pulso","Solo ausencia de pulso","Solo inconsciencia"], a:1, exp:"La PCR se reconoce por: inconsciencia (no responde a estímulos), ausencia de respiración normal (no respira o jadea) y ausencia de pulso central (carotídeo). Requiere RCP inmediata." },
  { id:90, block:"Primeros Auxilios", difficulty:"medio", q:"¿Cuál es la secuencia correcta de RCP básica en adultos?", opts:["2 ventilaciones y luego 30 compresiones","30 compresiones torácicas y 2 ventilaciones (30:2), comenzando siempre por las compresiones","Solo ventilaciones si no hay AED","Solo compresiones si hay dos socorristas"], a:1, exp:"La RCP básica en adultos: 30 COMPRESIONES torácicas (5-6 cm de profundidad, 100-120/minuto) + 2 VENTILACIONES. Comenzar SIEMPRE por las compresiones. Continuar hasta que llegue el DEA o los servicios de emergencia." },
  { id:91, block:"Primeros Auxilios", difficulty:"fácil", q:"¿Qué es el DEA (Desfibrilador Externo Automático)?", opts:["Un medicamento para el dolor","Un aparato que analiza el ritmo cardíaco y aplica descarga eléctrica si es necesario para restaurar el ritmo normal","Un aparato de oxigenoterapia","Un tipo de camilla especial"], a:1, exp:"El DEA analiza automáticamente el ritmo cardíaco y, si detecta fibrilación ventricular, indica la descarga y la aplica. Su uso precoz junto con la RCP multiplica las posibilidades de supervivencia." },
  { id:92, block:"Primeros Auxilios", difficulty:"medio", q:"¿Cuándo se aplica la Posición Lateral de Seguridad (PLS)?", opts:["Ante cualquier accidentado","A la persona INCONSCIENTE que SÍ RESPIRA, para evitar asfixia por vómito o caída de lengua","Ante una parada cardiorrespiratoria","Solo ante traumatismos cervicales"], a:1, exp:"La PLS se usa en personas inconscientes que respiran espontáneamente. La posición lateral previene la obstrucción de las vías aéreas por la lengua o vómito. SI NO respira → RCP inmediata." },
  { id:93, block:"Primeros Auxilios", difficulty:"fácil", q:"¿Cómo se actúa ante una HEMORRAGIA externa abundante?", opts:["Aplicar torniquete inmediatamente en la raíz del miembro","Presión directa y mantenida sobre la herida con tela limpia o apósito estéril","Elevar el miembro sin presionar","Lavar la herida con agua abundante primero"], a:1, exp:"La PRESIÓN DIRECTA es la primera y más efectiva medida para hemorragias externas. El torniquete solo se usa en caso de amputación o hemorragia masiva que no cede con presión directa." },
  { id:94, block:"Primeros Auxilios", difficulty:"medio", q:"¿Qué NO se debe hacer ante una posible fractura de hueso?", opts:["Inmovilizar la zona afectada","Mover el miembro fracturado intentando corregir la posición","Cubrir heridas si la fractura es abierta","Llamar al 112"], a:1, exp:"NUNCA se debe intentar realinear una fractura ni mover el miembro. La inmovilización en la posición en que se encuentra evita daños adicionales a vasos, nervios y tejidos blandos." },
  { id:95, block:"Primeros Auxilios", difficulty:"medio", q:"¿Cómo se trata una quemadura química por ácido o base?", opts:["Aplicar neutralizante (base para ácido, ácido para base)","Lavar con abundante agua corriente durante 15-20 minutos, retirando la ropa contaminada","Cubrir con vendaje sin lavar","Aplicar pomada antibiótica directamente"], a:1, exp:"El lavado con AGUA ABUNDANTE (15-20 minutos mínimo) es la primera acción. NUNCA usar neutralizantes: la reacción exotérmica puede empeorar la lesión. Retirar la ropa contaminada." },
  { id:96, block:"Primeros Auxilios", difficulty:"difícil", q:"¿Qué contenido MÍNIMO debe tener el botiquín de un almacén según normativa?", opts:["Solo tiritas y agua oxigenada","Desinfectante, gasas, vendas, esparadrapo, tijeras, guantes desechables, manta térmica y manual de primeros auxilios","Solo gasas y tiritas","Solo lo que decida la empresa"], a:1, exp:"El botiquín mínimo incluye: desinfectante, gasas estériles, vendas, esparadrapo, tijeras, guantes desechables (mínimo 2 pares), manta isotérmica, analgésico y manual de primeros auxilios actualizado." },
  { id:97, block:"Emergencias", difficulty:"fácil", q:"¿Qué es el Plan de Emergencia?", opts:["Una lista de teléfonos útiles","El documento que establece las actuaciones a seguir ante situaciones de emergencia (incendio, accidente grave, vertido) para proteger vidas y bienes","Solo el mapa de evacuación","Solo el plan antiincendios"], a:1, exp:"El Plan de Emergencia define: tipos de emergencia, medios de extinción y protección, evacuación, responsabilidades, comunicaciones y procedimientos específicos para cada tipo de emergencia." },
  { id:98, block:"Emergencias", difficulty:"medio", q:"¿Qué son los 'equipos de primera intervención' (EPI de emergencias)?", opts:["Los EPIs individuales de los trabajadores","Trabajadores formados para dar respuesta inicial a una emergencia antes de la llegada de bomberos","El equipo de dirección de la empresa","Los dispositivos de detección de incendios"], a:1, exp:"Los equipos de primera intervención son grupos de trabajadores formados para usar extintores y medios de extinción en la fase inicial de un incendio, antes de que lleguen los bomberos." },
  { id:99, block:"Emergencias", difficulty:"fácil", q:"¿Qué debe hacerse al escuchar la señal de evacuación del almacén?", opts:["Esperar a que pase la alarma sin moverse","Evacuar por las salidas de emergencia señalizadas, sin correr, sin usar ascensores, cerrando puertas","Ir a buscar los objetos personales primero","Llamar a compañeros antes de salir"], a:1, exp:"En evacuación: salir calmadamente por las salidas de emergencia (nunca ascensores), cerrar puertas (retarda propagación del fuego), dirigirse al punto de reunión y no volver a entrar." },
  { id:100, block:"Emergencias", difficulty:"medio", q:"¿Qué número se llama en España ante una emergencia grave?", opts:["091 (Policía)","061 (Ambulancias)","112 (Emergencias europeo)","080 (Bomberos)"], a:2, exp:"El 112 es el número de emergencias europeo que coordina policía, bomberos y ambulancias. En España atiende las 24h y es gratuito. Los demás números también funcionan pero el 112 es el unificado." },
  { id:101, block:"Emergencias", difficulty:"difícil", q:"¿Qué información debe comunicar quien llama al 112 ante un accidente?", opts:["Solo el nombre y DNI","Qué ha pasado, dónde (dirección exacta), cuántos heridos, estado aparente de los heridos y si hay peligros adicionales","Solo el número de heridos","Solo el tipo de accidente"], a:1, exp:"Al llamar al 112: QUÉ ha pasado, DÓNDE exactamente (dirección, punto kilométrico), CUÁNTOS heridos, su estado aparente (consciente/inconsciente, respira) y si hay peligros adicionales (fuego, productos químicos)." },
  { id:102, block:"Emergencias", difficulty:"medio", q:"¿Qué es el 'punto de reunión' en un plan de evacuación?", opts:["El despacho del director","El lugar exterior, alejado y seguro donde se concentran los evacuados para control del personal y evitar que vuelvan al edificio","La salida principal del almacén","La zona de aparcamiento"], a:1, exp:"El punto de reunión es el lugar preestablecido fuera del edificio donde se concentran todos los evacuados. Permite contabilizar al personal y asegurarse de que nadie queda en el interior." },
  { id:103, block:"Normativa", difficulty:"medio", q:"¿Qué regula el RD 486/1997?", opts:["Los EPIs individuales","Las disposiciones mínimas de seguridad y salud en los lugares de trabajo (iluminación, temperatura, pasillos, orden)","El transporte de mercancías peligrosas","Las señales de seguridad"], a:1, exp:"El RD 486/1997 establece disposiciones mínimas de seguridad y salud en los lugares de trabajo: condiciones constructivas, orden, limpieza, iluminación, temperatura, ventilación y condiciones ambientales." },
  { id:104, block:"Normativa", difficulty:"medio", q:"¿Qué regula el RD 487/1997?", opts:["La señalización de seguridad","Las disposiciones mínimas sobre manipulación manual de cargas (peso, técnica, evaluación)","Los EPIs","La prevención de incendios"], a:1, exp:"El RD 487/1997 transpone la Directiva 90/269/CEE sobre manipulación manual de cargas. Establece la obligación de evaluar los riesgos y adoptar medidas organizativas y técnicas." },
  { id:105, block:"Normativa", difficulty:"difícil", q:"¿Qué regula el RD 1215/1997?", opts:["Los EPIs","Las disposiciones mínimas de seguridad y salud para la utilización de equipos de trabajo (maquinaria, carretillas, etc.)","La señalización","Los primeros auxilios"], a:1, exp:"El RD 1215/1997 establece los requisitos mínimos de seguridad para la utilización de equipos de trabajo: mantenimiento, condiciones de utilización, formación del operador, etc." },
  { id:106, block:"Normativa", difficulty:"medio", q:"¿Qué es el Delegado de Prevención?", opts:["El técnico externo de prevención","El representante de los trabajadores en materia de prevención de riesgos laborales, elegido por y entre los representantes de los trabajadores","El responsable de seguridad de la empresa","El inspector de trabajo"], a:1, exp:"El Delegado de Prevención es elegido por los representantes de los trabajadores y tiene funciones de consulta, información, participación y vigilancia del cumplimiento normativo en PRL." },
  { id:107, block:"Normativa", difficulty:"difícil", q:"¿Cuándo es obligatorio el Comité de Seguridad y Salud?", opts:["En todas las empresas","En empresas con 50 o más trabajadores","En empresas con 25 o más trabajadores","Solo en empresas con riesgo alto"], a:1, exp:"El Comité de Seguridad y Salud es obligatorio en empresas o centros de trabajo con 50 o más trabajadores. Es un órgano paritario (empresa + trabajadores) de participación en PRL." },
  { id:108, block:"Normativa", difficulty:"medio", q:"¿Qué obligaciones tiene el TRABAJADOR según la LPRL?", opts:["Solo usar los EPIs que el empresario decida","Velar por su seguridad, usar correctamente EPIs y equipos, informar de riesgos y cooperar con el empresario","No tiene obligaciones, es solo el empresario","Solo asistir a los cursos de formación"], a:1, exp:"Los trabajadores deben: velar por su propia seguridad y la de compañeros, usar correctamente EPIs y equipos, no poner fuera de funcionamiento medidas de seguridad, e informar de riesgos detectados." },
  { id:109, block:"Carretillas", difficulty:"fácil", q:"¿Qué permiso necesita el operador de una carretilla elevadora?", opts:["Carné de conducir de turismo tipo B","Autorización específica de la empresa tras recibir formación teórica y práctica adecuada","Solo experiencia previa","El carné de carretillero no existe, cualquiera puede usarla"], a:1, exp:"El RD 1215/1997 exige que los operadores de carretillas reciban formación adecuada. La empresa debe autorizar por escrito a cada operador tras verificar su formación y capacidad." },
  { id:110, block:"Carretillas", difficulty:"medio", q:"¿A qué velocidad máxima debe circular una carretilla en el interior del almacén?", opts:["30 km/h","10 km/h en general (reducida a 5 km/h en zonas de peatones)","20 km/h","No hay límite de velocidad interior"], a:1, exp:"La velocidad máxima en interiores suele ser 10 km/h, reduciéndose a 5 km/h en zonas de cruce con peatones, pasillos estrechos y proximidad a muelles. Debe adecuarse a las condiciones." },
  { id:111, block:"Carretillas", difficulty:"fácil", q:"¿A qué altura deben transportarse las cargas en una carretilla elevadora?", opts:["Lo más alto posible para ver mejor","A unos 20-30 cm del suelo (horquillas bajas) para mayor estabilidad","A la altura de la cintura del operador","No importa la altura durante el transporte"], a:1, exp:"Durante el desplazamiento, las horquillas deben llevarse bajas (20-30 cm del suelo) e inclinadas hacia atrás para garantizar la estabilidad y visibilidad del operador." },
  { id:112, block:"Carretillas", difficulty:"medio", q:"¿Qué se debe hacer al dejar una carretilla sin vigilancia?", opts:["Dejarla con el motor en marcha para que esté lista","Bajar las horquillas al suelo, sacar la llave, aplicar freno de estacionamiento y aparcar en zona señalizada","Solo aplicar el freno de mano","Solo sacar la llave"], a:1, exp:"Al dejar una carretilla: horquillas en el suelo, retirar la llave, aplicar el freno de estacionamiento, aparcar en la zona habilitada y nunca en pasillos principales." },
  { id:113, block:"Carretillas", difficulty:"difícil", q:"¿Qué es el 'diagrama de carga' de una carretilla?", opts:["El historial de mantenimiento","El documento que indica la carga máxima en función de la distancia del centro de carga y la altura de elevación","El manual del operador","El registro de accidentes de la carretilla"], a:1, exp:"El diagrama de carga muestra gráficamente cómo varía la capacidad de elevación según la distancia del centro de la carga al talón de la horquilla y la altura de elevación. Debe consultarse siempre." },
  { id:114, block:"Carretillas", difficulty:"medio", q:"¿Cuándo debe realizarse el mantenimiento de una carretilla elevadora?", opts:["Solo cuando falla algo","Según el plan de mantenimiento del fabricante (revisiones periódicas) y revisión diaria del operador antes del turno","Una vez al año","Solo después de un accidente"], a:1, exp:"El operador debe realizar una revisión diaria pre-turno (niveles, frenos, luces, estado de horquillas). Además, el fabricante establece revisiones periódicas que deben documentarse." },
  { id:115, block:"Estanterías", difficulty:"fácil", q:"¿Qué debe indicarse en cada estantería del almacén?", opts:["Solo el nombre del fabricante","La carga máxima autorizada por balda, módulo y estructura completa","Solo la fecha de instalación","Solo el material de fabricación"], a:1, exp:"Cada estantería debe tener visible la carga máxima por balda, por módulo (bahía) y total. Superar estos límites puede provocar el colapso de la estructura y graves accidentes." },
  { id:116, block:"Estanterías", difficulty:"medio", q:"¿Qué norma europea regula las estanterías metálicas de almacén?", opts:["UNE-EN 15512","ISO 9001","RD 486/1997","UNE-EN ISO 45001"], a:0, exp:"La norma UNE-EN 15512 establece los principios de diseño estructural para estanterías metálicas de almacenamiento. Define pruebas de carga, tolerancias y documentación requerida." },
  { id:117, block:"Estanterías", difficulty:"fácil", q:"¿Qué es el 'picking'?", opts:["El proceso de cargar camiones","La operación de extraer unidades o cantidades menores de unidades completas de una ubicación de almacén para preparar pedidos","El proceso de inventariar mercancía","El proceso de recibir mercancía"], a:1, exp:"El picking (preparación de pedidos) es la operación de recoger productos de las ubicaciones del almacén para preparar pedidos. Genera riesgos específicos de caídas y sobreesfuerzos." },
  { id:118, block:"Estanterías", difficulty:"difícil", q:"¿Qué debe hacerse ante una estantería dañada (montante doblado)?", opts:["Continuar usándola con cuidado","Señalizar el daño, descargarlo inmediatamente y no volver a cargarla hasta que la repare un especialista o empresa autorizada","Solo avisar al jefe","Usar más protectores de esquina"], a:1, exp:"Una estantería dañada puede colapsar. Debe: señalizarse para evitar su uso, descargar inmediatamente la zona afectada y contactar con el fabricante o instalador para evaluación y reparación." },
  { id:119, block:"Riesgos Físicos", difficulty:"medio", q:"¿A partir de qué nivel de ruido es obligatoria la señalización y el acceso con protección auditiva?", opts:["70 dB(A)","80 dB(A)","85 dB(A)","100 dB(A)"], a:2, exp:"Según el RD 286/2006 sobre ruido: a partir de 85 dB(A) (Valor Superior de Exposición) es obligatorio proporcionar y usar protectores auditivos y señalizar la zona." },
  { id:120, block:"Riesgos Físicos", difficulty:"fácil", q:"¿Qué riesgo genera la exposición a vibraciones en conductores de carretilla?", opts:["Solo molestias pasajeras","Problemas en la columna vertebral (hernia discal lumbar), síndrome de Raynaud en manos","Solo fatiga muscular","Solo pérdida de audición"], a:1, exp:"La vibración de cuerpo entero (vehículos) daña la columna vertebral. La vibración mano-brazo (herramientas vibratorias) puede causar síndrome de Raynaud (trastorno circulatorio) y daño nervioso." },
];

const COLORS = {
  bg: '#07070d',
  surface: '#0e0e1a',
  border: '#1a1a2e',
  accent: '#e85d04',
  accentDim: '#7c2d00',
  success: '#22c55e',
  error: '#ef4444',
  warning: '#f59e0b',
  text: '#e2e8f0',
  textDim: '#94a3b8',
  textMuted: '#475569',
};

const DIFF_COLOR = { fácil: '#22c55e', medio: '#f59e0b', difícil: '#ef4444' };

function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function ProgressBar({ current, total }) {
  const pct = (current / total) * 100;
  return (
    <div style={{ width: '100%', height: 6, background: '#1a1a2e', borderRadius: 3, overflow: 'hidden' }}>
      <div style={{
        height: '100%',
        width: `${pct}%`,
        background: `linear-gradient(90deg, #e85d04, #f97316)`,
        borderRadius: 3,
        transition: 'width 0.4s ease',
      }} />
    </div>
  );
}

function Badge({ text, color }) {
  return (
    <span style={{
      display: 'inline-block',
      padding: '2px 10px',
      borderRadius: 20,
      fontSize: 11,
      fontWeight: 700,
      letterSpacing: 1,
      textTransform: 'uppercase',
      color: '#fff',
      background: color,
    }}>{text}</span>
  );
}

function QuizScreen({ questions, onFinish }) {
  const [idx, setIdx] = useState(0);
  const [selected, setSelected] = useState(null);
  const [showExp, setShowExp] = useState(false);
  const [score, setScore] = useState(0);
  const [mistakes, setMistakes] = useState([]);

  const q = questions[idx];
  const isCorrect = selected === q.a;

  function handleSelect(i) {
    if (selected !== null) return;
    setSelected(i);
    setShowExp(true);
    if (i === q.a) setScore(s => s + 1);
    else setMistakes(m => [...m, { ...q, chosen: i }]);
  }

  function handleNext() {
    if (idx + 1 >= questions.length) {
      onFinish({ score, total: questions.length, mistakes });
    } else {
      setIdx(i => i + 1);
      setSelected(null);
      setShowExp(false);
    }
  }

  const optColors = (i) => {
    if (selected === null) return { bg: '#0e0e1a', border: '#1a1a2e', color: COLORS.text };
    if (i === q.a) return { bg: '#14532d', border: '#22c55e', color: '#bbf7d0' };
    if (i === selected && i !== q.a) return { bg: '#450a0a', border: '#ef4444', color: '#fecaca' };
    return { bg: '#0e0e1a', border: '#1a1a2e', color: COLORS.textMuted };
  };

  return (
    <div style={{ maxWidth: 720, margin: '0 auto', padding: '24px 16px' }}>
      <div style={{ marginBottom: 20 }}>
        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 10 }}>
          <span style={{ fontFamily: "'Barlow Condensed'", fontSize: 14, color: COLORS.textDim, letterSpacing: 2, textTransform: 'uppercase' }}>
            Pregunta {idx + 1} / {questions.length}
          </span>
          <span style={{ fontFamily: "'Barlow Condensed'", fontSize: 18, fontWeight: 700, color: COLORS.accent }}>
            ✓ {score} pts
          </span>
        </div>
        <ProgressBar current={idx + 1} total={questions.length} />
      </div>

      <div style={{
        background: COLORS.surface,
        border: `1px solid ${COLORS.border}`,
        borderRadius: 16,
        padding: '28px 28px 24px',
        marginBottom: 16,
      }}>
        <div style={{ display: 'flex', gap: 8, marginBottom: 16 }}>
          <Badge text={q.block} color="#1e3a5f" />
          <Badge text={q.difficulty} color={DIFF_COLOR[q.difficulty]} />
        </div>
        <p style={{
          fontFamily: "'Barlow Condensed'",
          fontSize: 22,
          fontWeight: 700,
          color: COLORS.text,
          lineHeight: 1.4,
          margin: 0,
        }}>{q.q}</p>
      </div>

      <div style={{ display: 'flex', flexDirection: 'column', gap: 10, marginBottom: 16 }}>
        {q.opts.map((opt, i) => {
          const c = optColors(i);
          return (
            <button
              key={i}
              className="quiz-btn"
              onClick={() => handleSelect(i)}
              style={{
                background: c.bg,
                border: `2px solid ${c.border}`,
                borderRadius: 12,
                padding: '14px 18px',
                textAlign: 'left',
                cursor: selected !== null ? 'default' : 'pointer',
                color: c.color,
                fontFamily: "'Barlow'",
                fontSize: 15,
                fontWeight: 500,
                display: 'flex',
                alignItems: 'center',
                gap: 12,
                transition: 'all 0.15s',
              }}
            >
              <span style={{
                width: 28, height: 28,
                borderRadius: '50%',
                border: `2px solid ${c.border}`,
                display: 'flex', alignItems: 'center', justifyContent: 'center',
                fontSize: 13, fontWeight: 700, flexShrink: 0,
                color: c.color,
              }}>
                {String.fromCharCode(65 + i)}
              </span>
              {opt}
            </button>
          );
        })}
      </div>

      {showExp && (
        <div style={{
          background: isCorrect ? '#052e16' : '#2d0a0a',
          border: `1px solid ${isCorrect ? '#166534' : '#7f1d1d'}`,
          borderRadius: 12,
          padding: '16px 18px',
          marginBottom: 16,
        }}>
          <p style={{ margin: 0, fontSize: 13, color: isCorrect ? '#86efac' : '#fca5a5', lineHeight: 1.6 }}>
            <strong>{isCorrect ? '✓ ¡Correcto!' : '✗ Incorrecto.'}</strong> {q.exp}
          </p>
        </div>
      )}

      {selected !== null && (
        <button
          className="quiz-btn"
          onClick={handleNext}
          style={{
            width: '100%',
            padding: '16px',
            background: 'linear-gradient(135deg, #e85d04, #dc2626)',
            border: 'none',
            borderRadius: 12,
            color: '#fff',
            fontFamily: "'Barlow Condensed'",
            fontSize: 18,
            fontWeight: 700,
            letterSpacing: 1,
            cursor: 'pointer',
            animation: 'pulseBtn 2s infinite',
          }}
        >
          {idx + 1 >= questions.length ? 'VER RESULTADOS →' : 'SIGUIENTE PREGUNTA →'}
        </button>
      )}
    </div>
  );
}

function ResultScreen({ result, onRetry, onHome }) {
  const { score, total, mistakes } = result;
  const pct = Math.round((score / total) * 100);
  const grade = pct >= 90 ? '🏆 EXCELENTE' : pct >= 70 ? '👍 BIEN' : pct >= 50 ? '⚠️ MEJORABLE' : '❌ NECESITAS REPASAR';
  const gradeColor = pct >= 90 ? '#22c55e' : pct >= 70 ? '#f59e0b' : pct >= 50 ? '#f97316' : '#ef4444';

  return (
    <div style={{ maxWidth: 720, margin: '0 auto', padding: '24px 16px' }}>
      <div style={{
        background: COLORS.surface,
        border: `1px solid ${COLORS.border}`,
        borderRadius: 20,
        padding: '36px 28px',
        textAlign: 'center',
        marginBottom: 24,
      }}>
        <div style={{ fontSize: 64, marginBottom: 8 }}>
          {pct >= 90 ? '🏆' : pct >= 70 ? '🎯' : pct >= 50 ? '📚' : '💪'}
        </div>
        <h2 style={{ fontFamily: "'Barlow Condensed'", fontSize: 36, fontWeight: 900, color: gradeColor, margin: '0 0 8px' }}>
          {grade}
        </h2>
        <div style={{ fontFamily: "'Barlow Condensed'", fontSize: 72, fontWeight: 900, color: COLORS.text, lineHeight: 1 }}>
          {score}<span style={{ color: COLORS.textMuted, fontSize: 36 }}>/{total}</span>
        </div>
        <p style={{ color: COLORS.textDim, margin: '8px 0 0', fontSize: 16 }}>{pct}% de aciertos</p>
      </div>

      {mistakes.length > 0 && (
        <div style={{ marginBottom: 24 }}>
          <h3 style={{ fontFamily: "'Barlow Condensed'", color: COLORS.textDim, fontSize: 18, letterSpacing: 2, textTransform: 'uppercase', marginBottom: 12 }}>
            Preguntas falladas ({mistakes.length})
          </h3>
          {mistakes.map((m, i) => (
            <div key={i} style={{
              background: COLORS.surface,
              border: `1px solid #7f1d1d`,
              borderRadius: 12,
              padding: '14px 16px',
              marginBottom: 8,
            }}>
              <p style={{ margin: '0 0 6px', fontSize: 14, fontWeight: 600, color: COLORS.text }}>{m.q}</p>
              <p style={{ margin: '0 0 4px', fontSize: 13, color: '#fca5a5' }}>Tu respuesta: {m.opts[m.chosen]}</p>
              <p style={{ margin: 0, fontSize: 13, color: '#86efac' }}>Correcta: {m.opts[m.a]}</p>
            </div>
          ))}
        </div>
      )}

      <div style={{ display: 'flex', gap: 12 }}>
        <button className="quiz-btn" onClick={onHome} style={{
          flex: 1, padding: '16px', background: COLORS.surface, border: `2px solid ${COLORS.border}`,
          borderRadius: 12, color: COLORS.text, fontFamily: "'Barlow Condensed'", fontSize: 16, fontWeight: 700, cursor: 'pointer', letterSpacing: 1,
        }}>
          ← INICIO
        </button>
        <button className="quiz-btn" onClick={onRetry} style={{
          flex: 2, padding: '16px', background: 'linear-gradient(135deg, #e85d04, #dc2626)',
          border: 'none', borderRadius: 12, color: '#fff', fontFamily: "'Barlow Condensed'",
          fontSize: 18, fontWeight: 700, cursor: 'pointer', letterSpacing: 1,
        }}>
          REPETIR TEST →
        </button>
      </div>
    </div>
  );
}

function HomeScreen({ onStart }) {
  const [mode, setMode] = useState('random');
  const [count, setCount] = useState(20);
  const [difficulty, setDifficulty] = useState('all');
  const [block, setBlock] = useState('all');

  const blocks = ['all', ...Array.from(new Set(ALL_QUESTIONS.map(q => q.block)))];

  return (
    <div style={{ maxWidth: 640, margin: '0 auto', padding: '32px 16px' }}>
      <div style={{ textAlign: 'center', marginBottom: 40 }}>
        <div style={{
          display: 'inline-block',
          background: 'linear-gradient(135deg, #e85d04, #dc2626)',
          borderRadius: 16,
          padding: '12px 20px',
          marginBottom: 20,
        }}>
          <span style={{ fontFamily: "'Barlow Condensed'", fontSize: 13, fontWeight: 700, letterSpacing: 3, color: '#fff', textTransform: 'uppercase' }}>
            🏭 Almacén Seguro
          </span>
        </div>
        <h1 style={{ fontFamily: "'Barlow Condensed'", fontSize: 48, fontWeight: 900, color: '#fff', margin: 0, lineHeight: 1.1 }}>
          MEGA TEST<br />
          <span style={{ color: COLORS.accent }}>RIESGOS LABORALES</span>
        </h1>
        <p style={{ color: COLORS.textDim, marginTop: 12, fontSize: 16 }}>
          {ALL_QUESTIONS.length} preguntas · Seguridad en almacén · Normativa PRL
        </p>
      </div>

      <div style={{ background: COLORS.surface, border: `1px solid ${COLORS.border}`, borderRadius: 16, padding: '24px', marginBottom: 20 }}>
        <h3 style={{ fontFamily: "'Barlow Condensed'", color: COLORS.textDim, fontSize: 14, letterSpacing: 2, textTransform: 'uppercase', margin: '0 0 16px' }}>
          Configurar Test
        </h3>

        <div style={{ marginBottom: 16 }}>
          <label style={{ display: 'block', color: COLORS.textDim, fontSize: 13, marginBottom: 8, fontWeight: 600 }}>Nº de preguntas</label>
          <div style={{ display: 'flex', gap: 8 }}>
            {[10, 20, 30, 50, ALL_QUESTIONS.length].map(n => (
              <button key={n} className="quiz-btn" onClick={() => setCount(n)} style={{
                flex: 1, padding: '10px 4px', borderRadius: 10,
                background: count === n ? COLORS.accent : COLORS.bg,
                border: `2px solid ${count === n ? COLORS.accent : COLORS.border}`,
                color: count === n ? '#fff' : COLORS.textDim,
                fontFamily: "'Barlow Condensed'", fontWeight: 700, fontSize: 16, cursor: 'pointer',
              }}>{n === ALL_QUESTIONS.length ? 'TODAS' : n}</button>
            ))}
          </div>
        </div>

        <div style={{ marginBottom: 16 }}>
          <label style={{ display: 'block', color: COLORS.textDim, fontSize: 13, marginBottom: 8, fontWeight: 600 }}>Dificultad</label>
          <div style={{ display: 'flex', gap: 8 }}>
            {[['all','Todas'],['fácil','Fácil'],['medio','Medio'],['difícil','Difícil']].map(([v, l]) => (
              <button key={v} className="quiz-btn" onClick={() => setDifficulty(v)} style={{
                flex: 1, padding: '10px 4px', borderRadius: 10,
                background: difficulty === v ? COLORS.accent : COLORS.bg,
                border: `2px solid ${difficulty === v ? COLORS.accent : COLORS.border}`,
                color: difficulty === v ? '#fff' : COLORS.textDim,
                fontFamily: "'Barlow Condensed'", fontWeight: 700, fontSize: 14, cursor: 'pointer',
              }}>{l}</button>
            ))}
          </div>
        </div>

        <div>
          <label style={{ display: 'block', color: COLORS.textDim, fontSize: 13, marginBottom: 8, fontWeight: 600 }}>Bloque temático</label>
          <select value={block} onChange={e => setBlock(e.target.value)} style={{
            width: '100%', padding: '12px 14px', borderRadius: 10,
            background: COLORS.bg, border: `2px solid ${COLORS.border}`,
            color: COLORS.text, fontFamily: "'Barlow'", fontSize: 14, cursor: 'pointer',
          }}>
            {blocks.map(b => <option key={b} value={b}>{b === 'all' ? 'Todos los bloques' : b}</option>)}
          </select>
        </div>
      </div>

      <button className="quiz-btn" onClick={() => onStart({ count, difficulty, block })} style={{
        width: '100%', padding: '20px',
        background: 'linear-gradient(135deg, #e85d04, #dc2626)',
        border: 'none', borderRadius: 14, color: '#fff',
        fontFamily: "'Barlow Condensed'", fontSize: 24, fontWeight: 900,
        letterSpacing: 2, cursor: 'pointer', textTransform: 'uppercase',
        animation: 'pulseBtn 2s infinite',
      }}>
        ¡EMPEZAR TEST! →
      </button>

      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: 12, marginTop: 20 }}>
        {[
          { label: 'Preguntas', val: ALL_QUESTIONS.length, icon: '❓' },
          { label: 'Bloques', val: blocks.length - 1, icon: '📂' },
          { label: 'Normativa', val: 'LPRL', icon: '⚖️' },
        ].map((s, i) => (
          <div key={i} style={{ background: COLORS.surface, border: `1px solid ${COLORS.border}`, borderRadius: 12, padding: '16px', textAlign: 'center' }}>
            <div style={{ fontSize: 24, marginBottom: 4 }}>{s.icon}</div>
            <div style={{ fontFamily: "'Barlow Condensed'", fontSize: 22, fontWeight: 900, color: COLORS.text }}>{s.val}</div>
            <div style={{ fontSize: 11, color: COLORS.textMuted, textTransform: 'uppercase', letterSpacing: 1 }}>{s.label}</div>
          </div>
        ))}
      </div>
    </div>
  );
}

function App() {
  const [screen, setScreen] = useState('home');
  const [questions, setQuestions] = useState([]);
  const [result, setResult] = useState(null);
  const [lastConfig, setLastConfig] = useState(null);

  function startQuiz(config) {
    let filtered = ALL_QUESTIONS;
    if (config.difficulty !== 'all') filtered = filtered.filter(q => q.difficulty === config.difficulty);
    if (config.block !== 'all') filtered = filtered.filter(q => q.block === config.block);
    const shuffled = shuffle(filtered).slice(0, config.count);
    setQuestions(shuffled);
    setLastConfig(config);
    setScreen('quiz');
  }

  function handleFinish(r) {
    setResult(r);
    setScreen('result');
  }

  return (
    <div style={{ minHeight: '100vh', background: COLORS.bg }}>
      {screen === 'home' && <HomeScreen onStart={startQuiz} />}
      {screen === 'quiz' && <QuizScreen questions={questions} onFinish={handleFinish} />}
      {screen === 'result' && (
        <ResultScreen
          result={result}
          onRetry={() => startQuiz(lastConfig)}
          onHome={() => setScreen('home')}
        />
      )}
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);
  </script>
</body>
</html>
